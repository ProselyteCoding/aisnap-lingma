# AISnap 项目开发提示词指南

## 项目概述

**项目名称**：AISnap  
**项目定位**：基于Web的智能文档格式转换平台  

### 核心价值
解决AI生成内容的格式转换痛点：AI生成的Markdown内容粘贴到Word/PDF时格式错乱、截图不便、格式单一、操作繁琐等问题。

### 功能定义
- **主要功能**：Markdown文本和图像内容转换为多种标准格式文档或文本
- **输入方式**：Markdown文本输入、图片上传
- **输出格式**：图片、DOCX、HTML、LaTeX、PDF文件，以及DOCX纯文本提取
- **核心流程**：
  - 图片→通义千问VL→Markdown→node-pandoc→目标格式
  - Markdown→node-pandoc→目标格式
- **用户体验**：一进入网站即为主功能页面，可以实现基本转换功能，登录后解锁个性化设置和历史记录功能

### 目标用户
AI工具使用者

---

## 技术栈配置

### 前端技术栈
- **框架**：Next.js 14 + TypeScript + SCSS
- **组件库**：Ant Design
- **状态管理**：Zustand（用户设置、UI状态）+ SWR（服务端状态缓存）
- **样式方案**：SCSS模块化 + Ant Design主题定制

### 后端技术栈
- **API**：Next.js API Routes
- **数据库**：MySQL + Prisma ORM
- **认证**：NextAuth.js 或自定义JWT
- **文件处理**：node-pandoc + 系统级Pandoc

### 核心服务
- **AI服务**：通义千问VL-PLUS/VL-MAX/QVQ-MAX（图像转markdown）
- **转换引擎**：node-pandoc（markdown转各种格式）

---

## 开发阶段安排

### 阶段一：项目初始化与基础架构

**目标**：搭建完整的技术栈基础和项目结构

**核心任务**：
1. 使用 create-next-app 创建项目基础架构
2. 配置 SCSS + Ant Design 样式系统
3. 集成 Prisma + MySQL 数据层
4. 安装和配置系统级 Pandoc 依赖
5. 设置状态管理（Zustand + SWR）
6. 创建基础页面布局和导航结构

**技术要点**：
- 采用 SCSS 模块化方案
- 配置 Ant Design 主题定制
- 设置 Prisma 数据库连接和 Schema 设计
- 验证 node-pandoc 与系统 Pandoc 集成
- 建立响应式布局基础（移动端/桌面端适配）

### 阶段二：核心功能开发

**目标**：实现主要的文档转换功能和用户界面

**核心任务**：
1. 开发主布局和响应式导航系统
2. 实现文本输入和图片上传功能
3. 集成通义千问VL API进行图像识别
4. 集成node-pandoc实现格式转换
5. 开发样式模板系统（图片生成的基础）
6. 开发多格式输出和下载功能
7. 实现实时预览和样式选择

**技术要点**：
- 使用Ant Design组件构建用户界面
- 集成通义千问VL-PLUS/VL-MAX/QVQ-MAX API，进行轮询，避免请求失败
- 配置node-pandoc支持多种文档格式
- 实现图片→Markdown→目标格式的转换流程
- 支持DOCX纯文本提取功能
- 构建样式模板系统支持图片生成

**样式模板（用于生成图片）**：

用户可选配置项：
1. 字体选择（系统字体选项：微软雅黑、宋体、Arial等）
2. 字号选择（小、中、大、特大）
3. 风格选择（简约、经典、现代、学术等）
4. AI Logo显示（用户可选择不同主流AI的logo以表明分享的对话来源）

技术实现：
- 预设模板样式库，固定样式选项
- 用户通过下拉菜单、单选框等选择配置
- 动态CSS变量应用用户选择
- html2canvas基于选定配置生成图片
- 实时预览展示当前配置效果

转换流程详解：

**流程概述**：
AISnap采用双路径转换架构，根据输入类型智能选择最佳处理路径，确保高质量的格式转换输出。

**完整转换路径**：

```text
输入层 → AI处理层 → 转换引擎层 → 输出层
```

**详细流程说明**：

1. **输入处理（Input）**
   - **文本输入**：用户直接输入Markdown格式文本
   - **图片输入**：用户上传包含文本内容的图片文件
   - **输入验证**：系统检查输入格式和文件大小限制

2. **AI处理层（可选步骤）**
   - **触发条件**：仅当输入为图片时执行
   - **处理引擎**：通义千问VL-PLUS/VL-MAX/QVQ-MAX API
   - **处理逻辑**：图像OCR识别 + 内容理解 + Markdown格式化
   - **输出结果**：标准化的Markdown文本内容
   - **容错机制**：API轮询重试，确保转换成功率

3. **转换引擎层（核心处理）**
   - **转换工具**：node-pandoc（基于系统级Pandoc）
   - **输入标准**：统一的Markdown格式文本
   - **处理能力**：支持20+种文档格式互转
   - **输出路径**：
     - **输出1（直接格式）**：DOCX、HTML、LaTeX、PDF等标准文档格式
     - **输出2（纯文本提取）**：Markdown → DOCX → 纯文本内容提取
     - **输出3（图片生成）**：Markdown → HTML渲染 → Canvas截图 → 图片文件

4. **输出处理（Output）**
   - **文件下载**：DOCX、PDF、HTML等文件格式直接下载
   - **在线预览**：HTML格式支持实时预览显示
   - **文本显示**：纯文本内容直接在页面展示
   - **图片展示**：生成的图片支持预览和下载

API 接口：

- POST /api/ai/image-to-markdown - 通义千问 VL 图像转 Markdown
- POST /api/pandoc/convert/:type - node-pandoc 格式转换
- POST /api/pandoc/extract-text - DOCX 文本提取
- POST /api/convert/image - 基于预设模板和用户配置生成图片

### 阶段三：用户系统与数据管理

**目标**：实现完整的用户认证、个人功能和数据管理系统

**核心任务**：

1. 开发用户注册、登录、认证系统
2. 实现个人资料管理（昵称、头像、背景设置）
3. 构建转换历史记录系统
4. 开发用户偏好设置保存功能（保存常用的模板配置选项）
5. 设计和实现MySQL数据库Schema
6. 创建完整的用户权限控制

**技术要点**：

- 使用NextAuth.js或自定义JWT进行用户认证
- Prisma ORM管理MySQL数据库操作
- 实现可选登录模式（游客可直接使用）
- 构建用户个人设置和偏好系

**预期输出**：完整的用户系统，包含认证、个人功能、数据管理和权限控制

### 阶段四：性能优化与用户体验

**目标**：优化应用性能，提升用户体验，准备生产环境部署

**核心任务**：

1. 实现响应式设计和移动端适配
2. 优化应用性能和加载速度
3. 完善用户交互和动画效果
4. 准备生产环境配置

**技术要点**：

- 使用Ant Design响应式组件系统
- 实现代码分割和懒加载优化
- 配置SWR数据缓存策略
- 添加用户引导和错误处理

---
